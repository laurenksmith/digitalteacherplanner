{% extends "base.html" %}

{% block title %}Monthly Planner{% endblock %}

{% block content %}
<h1>{{ start_of_month.strftime('%B %Y') }}</h1>

<div class="nav">
  <a href="{{ url_for('monthly_view', year=prev_year, month=prev_month) }}">
    <i class="fas fa-arrow-left"></i> Previous
  </a>
  <a href="{{ url_for('monthly_view', year=today.year, month=today.month) }}">
    <i class="fas fa-calendar-alt"></i> This Month
  </a>
  <a href="{{ url_for('monthly_view', year=next_year, month=next_month) }}">
    Next <i class="fas fa-arrow-right"></i>
  </a>
</div>

<div class="calendar">
  {% for i in range(7) %}
    <div><strong>{{ ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][i] }}</strong></div>
  {% endfor %}

  {% set date = calendar_start %}
  {% while date <= calendar_end %}
    <div class="day {% if date == today %}today{% endif %}">
      <div><strong>{{ date.day }}</strong></div>
      {% if event_map[date.isoformat()] %}
        {% for event in event_map[date.isoformat()] %}
          <div class="event">{{ event.title }}</div>
        {% endfor %}
      {% endif %}
    </div>
    {% set date = date + timedelta(days=1) %}
  {% endwhile %}
</div>

<div class="nav" style="margin-top: 20px;">
  <a href="{{ url_for('index') }}">Back to homepage</a>
</div>
{% endblock %}
