{% extends "base.html" %}

{% block title %}Monthly Planner{% endblock %}

{% block content %}
<h1>{{ start_of_month.strftime('%B %Y') }}</h1>

<div class="nav">
  <a href="{{ url_for('month_view', year=prev_year, month=prev_month) }}">  <!-- I think this might fix my error message. I use month view elsewhere but for some reason I called it monthly_view here.-->
    <i class="fas fa-arrow-left"></i> Previous
  </a>
  <a href="{{ url_for('month_view', year=today.year, month=today.month) }}"> <!-- I think this might fix my error message. I use month view elsewhere but for some reason I called it monthly_view here.-->
    <i class="fas fa-calendar-alt"></i> This Month
  </a>
  <a href="{{ url_for('month_view', year=next_year, month=next_month) }}"> <!-- I think this might fix my error message. I use month view elsewhere but for some reason I called it monthly_view here.-->
    Next <i class="fas fa-arrow-right"></i>
  </a>
</div>

<div class="calendar">
  {# Weekday headers #}
  <div class="weekdays">
    {% for i in range(7) %}
      <div class="weekday">{{ ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'][i] }}</div>
    {% endfor %}
  </div>

  {# Calendar days #}
  {% for date in dates %}
    <div class="day {% if date == today %}today{% endif %}">
      <div><strong>{{ date.day }}</strong></div>
      {% if event_map[date.isoformat()] %}
        {% for event in event_map[date.isoformat()] %}
          <div class="event">{{ event.title }}</div>
        {% endfor %}
      {% endif %}
    </div>
  {% endfor %}
</div>

<div class="nav" style="margin-top: 20px;">
  <a href="{{ url_for('index') }}">Back to homepage</a>
</div>
{% endblock %}
